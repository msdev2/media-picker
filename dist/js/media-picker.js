/*! For license information please see media-picker.js.LICENSE.txt */
(()=>{"use strict";var e,t={654:()=>{function e(){var n,i,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function c(e,r,o,a){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return t(u,"_invoke",function(e,t,r){var o,a,c,s=0,u=r||[],d=!1,m={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(e,t){return o=e,a=0,c=n,m.n=t,l}};function f(e,t){for(a=e,c=t,i=0;!d&&s&&!r&&i<u.length;i++){var r,o=u[i],f=m.p,h=o[2];e>3?(r=h===t)&&(c=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=n):o[0]<=f&&((r=e<2&&f<o[1])?(a=0,m.v=t,m.n=o[1]):f<h&&(r=e<3||o[0]>t||t>h)&&(o[4]=e,o[5]=t,m.n=h,a=0))}if(r||e>1)return l;throw d=!0,t}return function(r,u,h){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),a=u,c=h;(i=a<2?n:c)||!d;){o||(a?a<3?(a>1&&(m.n=-1),f(a,c)):m.n=c:m.v=c);try{if(s=2,o){if(a||(r="next"),i=o[r]){if(!(i=i.call(o,c)))throw TypeError("iterator result is not an object");if(!i.done)return i;c=i.value,a<2&&(a=0)}else 1===a&&(i=o.return)&&i.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),a=1);o=n}else if((i=(d=m.n<0)?c:e.call(t,m))!==l)break}catch(e){o=n,a=1,c=e}finally{s=1}}return{value:i,done:d}}}(e,o,a),!0),u}var l={};function s(){}function u(){}function d(){}i=Object.getPrototypeOf;var m=[][o]?i(i([][o]())):(t(i={},o,function(){return this}),i),f=d.prototype=s.prototype=Object.create(m);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,a,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,t(f,"constructor",d),t(d,"constructor",u),u.displayName="GeneratorFunction",t(d,a,"GeneratorFunction"),t(f),t(f,a,"Generator"),t(f,o,function(){return this}),t(f,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:h}})()}function t(e,n,i,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}t=function(e,n,i,r){function a(n,i){t(e,n,function(e){return this._invoke(n,i,e)})}n?o?o(e,n,{value:i,enumerable:!r,configurable:!r,writable:!r}):e[n]=i:(a("next",0),a("throw",1),a("return",2))},t(e,n,i,r)}function n(e,t,n,i,r,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(i,r)}function i(e,t){return r.apply(this,arguments)}function r(){var t;return t=e().m(function t(n,i){var r,o,a,c,l;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=null===(r=document.querySelector('meta[name="csrf-token"]'))||void 0===r?void 0:r.getAttribute("content"),e.p=1,e.n=2,fetch("/media-picker/".concat(n),{method:"POST",body:i,headers:{"X-CSRF-TOKEN":o,Accept:"application/json"}});case 2:return a=e.v,e.n=3,a.json();case 3:if(c=e.v,a.ok){e.n=4;break}throw new Error(c.message||"An unknown error occurred.");case 4:return e.a(2,c);case 5:throw e.p=5,l=e.v,alert(l.message),l;case 6:return e.a(2)}},t,null,[[1,5]])}),r=function(){var e=this,i=arguments;return new Promise(function(r,o){var a=t.apply(e,i);function c(e){n(a,r,o,c,l,"next",e)}function l(e){n(a,r,o,c,l,"throw",e)}c(void 0)})},r.apply(this,arguments)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function c(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=null,this.promise=null,this.state={selectedPath:null},this._handleTreeClick=this._handleTreeClick.bind(this),this._handleConfirmClick=this._handleConfirmClick.bind(this),this._handleCancelClick=this._handleCancelClick.bind(this),this._handleBackdropClick=this._handleBackdropClick.bind(this)},t=[{key:"open",value:function(e,t){var n=this;return new Promise(function(i){n.promise={resolve:i},n._createModalElement(),n.render(e,t),n.attachEventListeners(),n.element.style.display="flex"})}},{key:"_createModalElement",value:function(){var e=document.createElement("div");e.className="ms-media-folder-modal-backdrop",e.innerHTML='\n            <div class="ms-media-folder-modal-content">\n                <h4>Select Destination Folder</h4>\n                <div class="ms-media-folder-modal-tree"></div>\n                <div class="ms-media-folder-modal-actions">\n                    <button type="button" class="ms-media-btn ms-folder-modal-cancel-btn">Cancel</button>\n                    <button type="button" class="ms-media-btn ms-media-btn-primary ms-folder-modal-move-btn" disabled>Move Here</button>\n                </div>\n            </div>\n        ',document.body.appendChild(e),this.element=e}},{key:"render",value:function(e,t){var n=function(e){var i="<ul>";return e.forEach(function(e){var r=e.path===t;i+='<li><a href="#" class="'.concat(r?"disabled":"",'" data-path="').concat(e.path,'" title="').concat(r?"Current folder":"",'">üìÅ ').concat(e.name,"</a>"),e.children&&e.children.length>0&&(i+=n(e.children)),i+="</li>"}),i+="</ul>"};this.element.querySelector(".ms-media-folder-modal-tree").innerHTML=n(e)}},{key:"attachEventListeners",value:function(){this.ui={tree:this.element.querySelector(".ms-media-folder-modal-tree"),moveBtn:this.element.querySelector(".ms-media-folder-modal-move-btn"),cancelBtn:this.element.querySelector(".ms-media-folder-modal-cancel-btn")},this.ui.tree.addEventListener("click",this._handleTreeClick),this.ui.moveBtn.addEventListener("click",this._handleConfirmClick),this.ui.cancelBtn.addEventListener("click",this._handleCancelClick),this.element.addEventListener("click",this._handleBackdropClick)}},{key:"_handleTreeClick",value:function(e){e.preventDefault();var t=e.target.closest("a");t&&!t.classList.contains("disabled")&&(this.ui.tree.querySelectorAll("a").forEach(function(e){return e.classList.remove("selected")}),t.classList.add("selected"),this.state.selectedPath=t.dataset.path,this.ui.moveBtn.disabled=!1)}},{key:"_handleConfirmClick",value:function(){this._resolveAndClose(this.state.selectedPath)}},{key:"_handleCancelClick",value:function(){this._resolveAndClose(null)}},{key:"_handleBackdropClick",value:function(e){e.target===this.element&&this._resolveAndClose(null)}},{key:"_resolveAndClose",value:function(e){this.promise&&this.promise.resolve(e),this.element.remove()}}],t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const s=l;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function m(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function h(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var p=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=null,this.promise=null,this.config=null},t=[{key:"open",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({title:"Enter a value",confirmText:"OK",fields:[]},t),new Promise(function(t){e.promise={resolve:t},e._createModalElement(),e.attachEventListeners(),e.element.style.display="flex";var n=e.element.querySelector('input[type="text"], input[type="url"]');n&&(n.focus(),n.select())})}},{key:"_createModalElement",value:function(){var e=document.createElement("div");e.className="ms-dialog-backdrop";var t=this.config.fields.map(function(e){return"checkbox"===e.type?'\n                    <div class="ms-dialog-group checkbox">\n                        <input type="checkbox" id="ms-prompt-input-'.concat(e.name,'" name="').concat(e.name,'" ').concat(e.checked?"checked":"",'>\n                        <label for="ms-prompt-input-').concat(e.name,'">').concat(e.label,"</label>\n                    </div>\n                "):'\n                <div class="ms-dialog-group">\n                    <label for="ms-prompt-input-'.concat(e.name,'">').concat(e.label,'</label>\n                    <input type="').concat(e.type||"text",'" id="ms-prompt-input-').concat(e.name,'" name="').concat(e.name,'" value="').concat(e.value||"",'" placeholder="').concat(e.placeholder||"",'">\n                </div>\n            ')}).join("");e.innerHTML='\n            <div class="ms-dialog-content">\n                <div class="ms-dialog-header">\n                    <h4>'.concat(this.config.title,'</h4>\n                    <button type="button" class="ms-dialog-close">&times;</button>\n                </div>\n                <div class="ms-dialog-body">').concat(t,'</div>\n                <div class="ms-dialog-footer">\n                    <button type="button" class="ms-media-btn ms-prompt-cancel-btn">Cancel</button>\n                    <button type="button" class="ms-media-btn ms-media-btn-primary ms-prompt-confirm-btn">').concat(this.config.confirmText,"</button>\n                </div>\n            </div>\n        "),document.body.appendChild(e),this.element=e}},{key:"attachEventListeners",value:function(){var e=this,t=this.element.querySelector(".ms-prompt-confirm-btn"),n=this.element.querySelector(".ms-prompt-cancel-btn"),i=this.element.querySelector(".ms-dialog-close");t.onclick=function(){return e._handleConfirm()},n.onclick=function(){return e._resolveAndClose(null)},i.onclick=function(){return e._resolveAndClose(null)},this.element.addEventListener("click",function(t){t.target===e.element&&e._resolveAndClose(null)})}},{key:"_handleConfirm",value:function(){var e=this,t={};this.config.fields.forEach(function(n){var i=e.element.querySelector('[name="'.concat(n.name,'"]'));i&&(t[n.name]="checkbox"===n.type?i.checked:i.value)}),this._resolveAndClose(t)}},{key:"_resolveAndClose",value:function(e){this.promise&&this.promise.resolve(e),this.element.remove()}}],t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const v=p;function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function g(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var k,w,S,E=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"_getContainer",value:function(){if(!this.container&&(this.container=document.createElement("div"),this.container.id="ms-toast-container",document.body.appendChild(this.container),!document.getElementById("ms-toast-animations"))){var e=document.createElement("style");e.id="ms-toast-animations",e.innerHTML="\n                    @keyframes ms-toast-fade-in {\n                        to { opacity: 1; transform: translateY(0); }\n                    }\n                    @keyframes ms-toast-fade-out {\n                        to { opacity: 0; transform: translateY(20px); }\n                    }\n                ",document.head.appendChild(e)}return this.container}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3,i=this._getContainer(),r=document.createElement("div");r.className="ms-toast ".concat(t),r.textContent=e,i.appendChild(r),setTimeout(function(){r.style.animation="ms-toast-fade-out 0.3s forwards",r.addEventListener("animationend",function(){return r.remove()})},n)}}],(t=null)&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();k=E,S=null,(w=g(w="container"))in k?Object.defineProperty(k,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):k[w]=S;const C=E;function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function O(){var e,t,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,i,r,o){var l=i&&i.prototype instanceof c?i:c,s=Object.create(l.prototype);return P(s,"_invoke",function(n,i,r){var o,c,l,s=0,u=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,c=0,l=e,m.n=n,a}};function f(n,i){for(c=n,l=i,t=0;!d&&s&&!r&&t<u.length;t++){var r,o=u[t],f=m.p,h=o[2];n>3?(r=h===i)&&(l=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(c=0,m.v=i,m.n=o[1]):f<h&&(r=n<3||o[0]>i||i>h)&&(o[4]=n,o[5]=i,m.n=h,c=0))}if(r||n>1)return a;throw d=!0,i}return function(r,u,h){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),c=u,l=h;(t=c<2?e:l)||!d;){o||(c?c<3?(c>1&&(m.n=-1),f(c,l)):m.n=l:m.v=l);try{if(s=2,o){if(c||(r="next"),t=o[r]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=e}else if((t=(d=m.n<0)?l:n.call(i,m))!==a)break}catch(t){o=e,c=1,l=t}finally{s=1}}return{value:t,done:d}}}(n,r,o),!0),s}var a={};function c(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][i]?t(t([][i]())):(P(t={},i,function(){return this}),t),d=s.prototype=c.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,P(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=s,P(d,"constructor",s),P(s,"constructor",l),l.displayName="GeneratorFunction",P(s,r,"GeneratorFunction"),P(d),P(d,r,"Generator"),P(d,i,function(){return this}),P(d,"toString",function(){return"[object Generator]"}),(O=function(){return{w:o,m}})()}function P(e,t,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}P=function(e,t,n,i){function o(t,n){P(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},P(e,t,n,i)}function T(e,t,n,i,r,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(i,r)}function L(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function a(e){T(o,i,r,a,c,"next",e)}function c(e){T(o,i,r,a,c,"throw",e)}a(void 0)})}}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function x(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,q(i.key),i)}}function q(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}var I=function(){return function(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({isInline:!1,onSelect:null},n),this.state={currentPath:"/",selectedFile:null,contents:{files:[],directories:[],all_directories:[]}},this.ui={body:this.element.querySelector(".ms-media-body"),breadcrumbs:this.element.querySelector(".ms-media-breadcrumbs"),loader:this.element.querySelector(".ms-media-loader"),selectBtn:this.element.querySelector(".ms-select-file-btn"),actionsPanel:this.element.querySelector(".ms-media-actions-panel"),createFolderBtn:this.element.querySelector(".ms-create-folder-btn"),uploadInput:this.element.querySelector(".ms-upload-file-input"),folderTree:this.element.querySelector(".ms-media-folder-tree")},this.attachEventListeners(),this.loadContents("/")},[{key:"attachEventListeners",value:function(){var e=this;if(this.ui.body&&this.ui.body.addEventListener("click",function(t){return e.handleItemClick(t)}),this.ui.folderTree&&this.ui.folderTree.addEventListener("click",function(t){return e.handleFolderTreeClick(t)}),this.ui.createFolderBtn&&this.ui.createFolderBtn.addEventListener("click",function(){return e.createFolder()}),this.ui.uploadInput&&this.ui.uploadInput.addEventListener("change",function(t){return e.uploadFile(t)}),this.ui.breadcrumbs&&this.ui.breadcrumbs.addEventListener("click",function(t){return e.handleBreadcrumbClick(t)}),this.ui.selectBtn&&this.ui.selectBtn.addEventListener("click",function(){return e.handleSelect()}),this.ui.actionsPanel){var t=function(t){return e.ui.actionsPanel.querySelector(t)},n=t(".actions-panel-close"),i=t(".copy-url-btn"),r=t(".get-resized-url-btn"),o=t(".rename-btn"),a=t(".move-btn"),c=t(".delete-btn");n&&n.addEventListener("click",function(){return e.hideActionsPanel()}),i&&i.addEventListener("click",function(){return e.copyToClipboard(".file-url-input")}),r&&r.addEventListener("click",function(){return e.getResizedUrl()}),o&&o.addEventListener("click",function(){return e.renameItem()}),a&&a.addEventListener("click",function(){return e.moveItem()}),c&&c.addEventListener("click",function(){return e.deleteItem()})}}},{key:"loadContents",value:(c=L(O().m(function e(t){var n,i;return O().w(function(e){for(;;)switch(e.p=e.n){case 0:return this.showLoader(!0),this.hideActionsPanel(),this.state.currentPath=t,e.p=1,e.n=2,fetch("/media-picker/get-contents?folder=".concat(encodeURIComponent(t))).then(function(e){return e.json()});case 2:n=e.v,this.state.contents=n,this.render(),e.n=4;break;case 3:e.p=3,i=e.v,console.error("Failed to load contents:",i);case 4:return e.p=4,this.showLoader(!1),e.f(4);case 5:return e.a(2)}},e,this,[[1,3,4,5]])})),function(e){return c.apply(this,arguments)})},{key:"render",value:function(){var e=this;this.ui.breadcrumbs&&(this.ui.breadcrumbs.innerHTML=this.state.contents.breadcrumbs.map(function(t,n){return n===e.state.contents.breadcrumbs.length-1?"<span>".concat(t.name,"</span>"):'<a href="#" data-path="'.concat(t.path,'">').concat(t.name,"</a> &gt;")}).join(" ")),this.ui.body&&(this.ui.body.innerHTML="",this.state.contents.directories.forEach(function(t){return e.ui.body.insertAdjacentHTML("beforeend",e.renderItem(t))}),this.state.contents.files.forEach(function(t){return e.ui.body.insertAdjacentHTML("beforeend",e.renderItem(t))})),this.ui.folderTree&&(this.ui.folderTree.innerHTML=this.buildTreeHTML(this.state.contents.all_directories))}},{key:"buildTreeHTML",value:function(e){var t=this,n="<ul>";return e.forEach(function(e){var i=t.state.currentPath===e.path;n+='<li><a href="#" class="'.concat(i?"active":"",'" data-path="').concat(e.path,'">üìÅ ').concat(e.name,"</a>"),e.children&&e.children.length>0&&(n+=t.buildTreeHTML(e.children)),n+="</li>"}),n+="</ul>"}},{key:"handleItemClick",value:function(e){var t=e.target.closest(".ms-media-item");t&&("directory"===t.dataset.type?this.loadContents(t.dataset.path):(console.log("%c[MediaPicker] Step 3: A file was clicked.","color: blue; font-weight: bold;"),this.selectItem(t)))}},{key:"handleFolderTreeClick",value:function(e){e.preventDefault();var t=e.target.closest("a");t&&t.dataset.path&&this.loadContents(t.dataset.path)}},{key:"renderFolderTree",value:function(e,t){var n=this,i="<ul>";return e.forEach(function(e){var r=n.state.currentPath===e.path;i+='<li><a href="#" class="'.concat(r?"active":"",'" data-path="').concat(e.path,'">üìÅ ').concat(e.name,"</a>"),e.children&&e.children.length>0&&(i+=n.renderFolderTree(e.children,t)),i+="</li>"}),i+="</ul>",t.innerHTML=i,i}},{key:"selectItem",value:function(e){this.element.querySelectorAll(".ms-media-item.selected").forEach(function(e){return e.classList.remove("selected")}),e.classList.add("selected"),this.state.selectedFile=JSON.parse(e.dataset.item),this.ui.selectBtn&&(this.ui.selectBtn.disabled="file"!==this.state.selectedFile.type),"file"===this.state.selectedFile.type?this.options.isInline?this.showActionsPanel():(console.log("[MediaPicker] This is a modal picker. Calling handleSelect() to trigger the callback..."),this.handleSelect()):this.hideActionsPanel()}},{key:"renderItem",value:function(e){var t=e.is_image?'<img src="'.concat(e.url,'" alt="').concat(e.name,'" loading="lazy">'):'<div class="ms-media-item-icon">'.concat("directory"===e.type?"üìÅ":"üìÑ","</div>");return'\n            <div class="ms-media-item" data-path="'.concat(e.path,'" data-type="').concat(e.type,"\" data-item='").concat(JSON.stringify(e),"'>\n                ").concat(t,'\n                <div class="ms-media-item-name">').concat(e.name,"</div>\n            </div>\n        ")}},{key:"handleSelect",value:function(){if(this.state.selectedFile&&"file"===this.state.selectedFile.type&&this.options.onSelect){var e={name:this.state.selectedFile.name,url:this.state.selectedFile.public_url,path:this.state.selectedFile.path,size:this.state.selectedFile.size,is_image:this.state.selectedFile.is_image};this.options.onSelect(e)}}},{key:"handleBreadcrumbClick",value:function(e){e.preventDefault(),"A"===e.target.tagName&&this.loadContents(e.target.dataset.path)}},{key:"showActionsPanel",value:function(){var e=this.state.selectedFile;if(e&&this.ui.actionsPanel){var t=this.ui.actionsPanel;t.querySelector(".file-name").textContent=e.name,t.querySelector(".file-size").textContent="".concat((e.size/1024).toFixed(2)," KB"),t.querySelector(".file-modified").textContent="Modified: ".concat(new Date(1e3*e.last_modified).toLocaleDateString()),t.querySelector(".file-url-input").value=e.public_url,t.querySelector(".actions-panel-preview").innerHTML=e.is_image?'<img src="'.concat(e.url,'" alt="Preview">'):'<div class="file-icon">üìÑ</div>',t.style.display="flex"}}},{key:"hideActionsPanel",value:function(){this.state.selectedFile=null,this.ui.selectBtn&&(this.ui.selectBtn.disabled=!0),this.element.querySelectorAll(".ms-media-item.selected").forEach(function(e){return e.classList.remove("selected")}),this.ui.actionsPanel&&(this.ui.actionsPanel.style.display="none")}},{key:"createFolder",value:(a=L(O().m(function e(){var t,n,r,o=this;return O().w(function(e){for(;;)switch(e.n){case 0:return t=new v,e.n=1,t.open({title:"Create New Folder",confirmText:"Create",fields:[{name:"folder_name",label:"Folder Name"}]});case 1:if(!(n=e.v)||!n.folder_name){e.n=2;break}return(r=new FormData).append("folder_name",n.folder_name),r.append("current_path",this.state.currentPath),e.n=2,i("create-folder",r).then(function(){return o.loadContents(o.state.currentPath)}).catch(function(){});case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"uploadFile",value:(o=L(O().m(function e(t){var n,r,o=this;return O().w(function(e){for(;;)switch(e.n){case 0:if(n=t.target.files[0]){e.n=1;break}return e.a(2);case 1:return(r=new FormData).append("file",n),r.append("current_path",this.state.currentPath),e.n=2,i("upload",r).then(function(){return o.loadContents(o.state.currentPath)}).catch(function(){});case 2:t.target.value="";case 3:return e.a(2)}},e,this)})),function(e){return o.apply(this,arguments)})},{key:"renameItem",value:(r=L(O().m(function e(){var t,n,r,o,a=this;return O().w(function(e){for(;;)switch(e.n){case 0:if(t=this.state.selectedFile){e.n=1;break}return e.a(2);case 1:return n=new v,e.n=2,n.open({title:"Rename ".concat(t.type),inputLabel:"New Name",initialValue:t.name,confirmText:"Rename"});case 2:if(!(r=e.v)||r===t.name){e.n=3;break}return(o=new FormData).append("path",t.path),o.append("new_name",r),e.n=3,i("rename",o).then(function(){C.show("Item renamed successfully."),a.loadContents(a.state.currentPath)}).catch(function(){});case 3:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"moveItem",value:(n=L(O().m(function e(){var t,n,r,o,a,c=this;return O().w(function(e){for(;;)switch(e.n){case 0:if(t=this.state.selectedFile){e.n=1;break}return e.a(2);case 1:return n=t.path.substring(0,t.path.lastIndexOf("/"))||"/",r=new s,e.n=2,r.open(this.state.contents.all_directories,n);case 2:if(null===(o=e.v)){e.n=3;break}return(a=new FormData).append("path",t.path),a.append("destination",o),e.n=3,i("move",a).then(function(){return c.loadContents(c.state.currentPath)}).catch(function(){});case 3:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"getResizedUrl",value:(t=L(O().m(function e(){var t,n,i,r,o,a,c,l,s;return O().w(function(e){for(;;)switch(e.n){case 0:if((t=this.state.selectedFile)&&t.is_image){e.n=1;break}return e.a(2,C.show("Please select an image file.","error"));case 1:return n=new v,e.n=2,n.open({title:"Get Resized URL - Step 1 of 2",confirmText:"Next",fields:[{name:"width",label:'Enter desired width (e.g., 300, or "w" for auto-height)'}]});case 2:if((i=e.v)&&i.width){e.n=3;break}return e.a(2);case 3:return e.n=4,n.open({title:"Get Resized URL - Step 2 of 2",confirmText:"Generate",fields:[{name:"height",label:'Enter desired height (e.g., 200, or "h" for auto-width)'}]});case 4:if((r=e.v)&&r.height){e.n=5;break}return e.a(2);case 5:o=t.path.replace(/^uploads\//,""),a=o.lastIndexOf("/"),c="",l=o,-1!==a&&(c=o.substring(0,a),l=o.substring(a+1)),s="".concat(window.location.origin,"/uploads/").concat(c,"/").concat(i.width,"/").concat(r.height,"/").concat(l),this.ui.actionsPanel.querySelector(".file-url-input").value=s,C.show("Resized URL generated in the input box.");case 6:return e.a(2)}},e,this)})),function(){return t.apply(this,arguments)})},{key:"deleteItem",value:(e=L(O().m(function e(){var t,n,r=this;return O().w(function(e){for(;;)switch(e.n){case 0:if((t=this.state.selectedFile)&&confirm('Are you sure you want to delete "'.concat(t.name,'"?'))){e.n=1;break}return e.a(2);case 1:return(n=new FormData).append("path",t.path),n.append("type",t.type),e.n=2,i("delete",n).then(function(){return r.loadContents(r.state.currentPath)}).catch(function(){});case 2:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"copyToClipboard",value:function(e){this.ui.actionsPanel.querySelector(e).select(),document.execCommand("copy"),C.show("Copied to clipboard!")}},{key:"showLoader",value:function(e){this.ui.loader&&(this.ui.loader.style.display=e?"flex":"none")}},{key:"destroy",value:function(){this.element=null,this.ui={}}}]);var e,t,n,r,o,a,c}();const F=I;var A={modalEl:null,pickerInstance:null,currentCallback:null,getPickerHTML:function(e){return'\n            <div class="ms-media-picker-container" data-is-inline="false">\n                <div class="ms-media-header">\n                    <nav class="ms-media-breadcrumbs"></nav>\n                    <div class="ms-media-actions">\n                        <button type="button" class="ms-media-btn ms-create-folder-btn">New Folder</button>\n                        <label class="ms-media-btn ms-media-btn-primary">\n                            Upload File <input type="file" class="ms-upload-file-input" style="display: none;" accept="'.concat(e,'">\n                        </label>\n                    </div>\n                </div>\n                <div class="ms-media-body-wrapper">\n                    <div class="ms-media-sidebar">\n                        <div class="sidebar-header">Folders</div>\n                        <div class="ms-media-folder-tree"></div>\n                    </div>\n                    <div class="ms-media-body"></div>\n                </div>\n                <div class="ms-media-footer">\n                    <div class="ms-media-selection-info"></div>\n                    <button type="button" class="ms-media-btn ms-media-btn-primary ms-select-file-btn" disabled>Select File</button>\n                </div>\n                <div class="ms-media-loader" style="display: none;"><div class="spinner"></div></div>\n            </div>\n        ')},open:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.modalEl||this.init(),this.currentCallback=e,this.triggerElement=i;var r=this.modalEl.querySelector("#ms-modal-picker-placeholder");r.innerHTML=this.getPickerHTML(n);this.pickerInstance=new F(r.firstElementChild,{isInline:!1,onSelect:function(e){var n=new CustomEvent("ms-media-file-selected",{detail:{file:e,triggerElement:t.triggerElement}});document.dispatchEvent(n),t.currentCallback&&t.currentCallback(e),t.close()}}),this.modalEl.style.display="flex",document.body.style.overflow="hidden"},close:function(){this.modalEl&&(this.modalEl.style.display="none"),this.currentCallback=null,this.triggerElement=null,document.body.style.overflow="",this.modalEl.querySelector("#ms-modal-picker-placeholder").innerHTML="",this.pickerInstance=null},init:function(){var e=this;this.modalEl=document.createElement("div"),this.modalEl.className="ms-media-picker-modal-backdrop",this.modalEl.style.display="none",this.modalEl.innerHTML='<div class="ms-media-picker-modal-content"><button class="ms-media-modal-close">&times;</button><div id="ms-modal-picker-placeholder"></div></div>',document.body.appendChild(this.modalEl),this.modalEl.querySelector(".ms-media-modal-close").onclick=function(){return e.close()},this.modalEl.addEventListener("click",function(t){t.target===e.modalEl&&e.close()})}};const D=A;function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function H(){var e,t,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function o(n,i,r,o){var l=i&&i.prototype instanceof c?i:c,s=Object.create(l.prototype);return B(s,"_invoke",function(n,i,r){var o,c,l,s=0,u=r||[],d=!1,m={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,c=0,l=e,m.n=n,a}};function f(n,i){for(c=n,l=i,t=0;!d&&s&&!r&&t<u.length;t++){var r,o=u[t],f=m.p,h=o[2];n>3?(r=h===i)&&(l=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=e):o[0]<=f&&((r=n<2&&f<o[1])?(c=0,m.v=i,m.n=o[1]):f<h&&(r=n<3||o[0]>i||i>h)&&(o[4]=n,o[5]=i,m.n=h,c=0))}if(r||n>1)return a;throw d=!0,i}return function(r,u,h){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),c=u,l=h;(t=c<2?e:l)||!d;){o||(c?c<3?(c>1&&(m.n=-1),f(c,l)):m.n=l:m.v=l);try{if(s=2,o){if(c||(r="next"),t=o[r]){if(!(t=t.call(o,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=o.return)&&t.call(o),c<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),c=1);o=e}else if((t=(d=m.n<0)?l:n.call(i,m))!==a)break}catch(t){o=e,c=1,l=t}finally{s=1}}return{value:t,done:d}}}(n,r,o),!0),s}var a={};function c(){}function l(){}function s(){}t=Object.getPrototypeOf;var u=[][i]?t(t([][i]())):(B(t={},i,function(){return this}),t),d=s.prototype=c.prototype=Object.create(u);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,B(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return l.prototype=s,B(d,"constructor",s),B(s,"constructor",l),l.displayName="GeneratorFunction",B(s,r,"GeneratorFunction"),B(d),B(d,r,"Generator"),B(d,i,function(){return this}),B(d,"toString",function(){return"[object Generator]"}),(H=function(){return{w:o,m}})()}function B(e,t,n,i){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}B=function(e,t,n,i){function o(t,n){B(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},B(e,t,n,i)}function R(e,t,n,i,r,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(i,r)}function G(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,z(i.key),i)}}function z(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=N(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}var U=function(){return function(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.ui={content:this.element.querySelector(".ms-editor-content"),code:this.element.querySelector(".ms-editor-code"),formInput:this.element.querySelector(".ms-editor-form-input"),toolbar:this.element.querySelector(".ms-editor-toolbar"),editModal:document.querySelector(".ms-media-edit-modal-backdrop")},this.state={codeViewActive:!1},this.savedSelection=null,this._initialized=!1,this.init()},[{key:"init",value:function(){var e=this;this._initialized||(this._initialized=!0,this.ui.content.addEventListener("input",function(){e.ui.formInput.value=e.ui.content.innerHTML,e.ui.code.value=e.ui.content.innerHTML,e.dispatchChange()}),this.ui.code.addEventListener("input",function(){e.ui.content.innerHTML=e.ui.code.value,e.ui.formInput.value=e.ui.code.value,e.dispatchChange()}),this.ui.formInput.addEventListener("input",function(){e.ui.formInput.value!==e.ui.content.innerHTML&&(e.ui.content.innerHTML=e.ui.formInput.value,e.ui.code.value=e.ui.formInput.value,e.dispatchChange())}),this.ui.toolbar.addEventListener("click",function(t){return e.handleToolbarClick(t)}),this.ui.toolbar.addEventListener("change",function(t){return e.handleToolbarChange(t)}),this.ui.toolbar.addEventListener("mousedown",function(){e.savedSelection=e.saveSelection()}),this.ui.content.addEventListener("dblclick",function(t){return e.handleMediaDoubleClick(t)}),this.ui.formInput.value=this.ui.content.innerHTML,this.ui.code.value=this.ui.content.innerHTML)}},{key:"dispatchChange",value:function(){this.element.dispatchEvent(new CustomEvent("ms-editor-content-changed",{detail:{content:this.ui.content.innerHTML,plainText:this.ui.content.textContent,codeView:this.state.codeViewActive}}))}},{key:"handleToolbarClick",value:function(e){var t=e.target.closest("button");if(t){e.preventDefault();var n=t.dataset.command;t.parentElement.classList.contains("ms-editor-tool-wrapper")?t.parentElement.querySelector('input[type="color"]').click():t.classList.contains("ms-code-view-btn")?this.toggleCodeView(t):t.classList.contains("ms-add-media-btn")?this.openMediaModal(t.dataset.mediaType):this.execCmd(n)}}},{key:"handleToolbarChange",value:function(e){var t=e.target.closest('select, input[type="color"]');if(t){e.preventDefault();var n=t.dataset.command;this.restoreSelection(this.savedSelection),this.execCmd(n,t.value)}}},{key:"toggleCodeView",value:function(e){this.state.codeViewActive=!this.state.codeViewActive,e.classList.toggle("active",this.state.codeViewActive),this.ui.content.style.display=this.state.codeViewActive?"none":"block",this.ui.code.style.display=this.state.codeViewActive?"block":"none"}},{key:"openMediaModal",value:function(e){var t=this,n=this.saveSelection();D.open(function(i){var r=i.name.match(/\.(jpeg|jpg|gif|png|webp|svg)$/i),o=i.name.match(/\.(mp4|webm|ogg)$/i);if("image"===e&&!r||"video"===e&&!o)return C.show("Please select a valid ".concat(e," file."),"error");t.openEditDialog({type:e,src:i.url,alt:i.name},n)})}},{key:"handleMediaDoubleClick",value:function(e){var t=e.target;if("IMG"===t.tagName||"VIDEO"===t.tagName){e.preventDefault();var n="";"left"===t.style.float||"right"===t.style.float?n=t.style.float:"block"!==t.style.display||"auto"!==t.style.marginLeft&&"auto"!==t.style.marginRight||(n="center");var i={type:t.tagName.toLowerCase(),src:t.getAttribute("src"),alt:t.alt,width:t.style.width.replace("px",""),height:t.style.height.replace("px",""),id:t.id,className:t.className,align:n};this.openEditDialog(i,null,t)}}},{key:"openEditDialog",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.ui.editModal;if(!r)return console.error("Edit Media Modal not found in DOM.");var o=r.querySelector("#ms-media-edit-title"),a=r.querySelector("#ms-media-edit-preview-img"),c=r.querySelector("#ms-media-edit-preview-video"),l=r.querySelector("#ms-media-edit-alt"),s=r.querySelector("#ms-media-edit-width"),u=r.querySelector("#ms-media-edit-height"),d=r.querySelector("#ms-media-edit-align"),m=r.querySelector("#ms-media-edit-class"),f=r.querySelector("#ms-media-edit-id"),h=r.querySelector("#ms-media-edit-insert-btn"),p=r.querySelector("#ms-media-edit-cancel-btn"),v=r.querySelector(".ms-media-edit-modal-close");o.textContent=i?"Edit Media":"Insert Media",h.textContent=i?"Update":"Insert",a.style.display="none",c.style.display="none","image"===e.type||"img"===e.type?(a.style.display="block",a.src=e.src):"video"===e.type&&(c.style.display="block",c.src=e.src),l.value=e.alt||"",s.value=e.width||"",u.value=e.height||"",d.value=e.align||"",m.value=e.className||"",f.value=e.id||"",r.style.display="flex";var y=function(){r.style.display="none",h.onclick=null,p.onclick=null,v.onclick=null};h.onclick=function(){var r;i?r=i:(r=document.createElement("image"===e.type?"img":e.type)).src=e.src,r.alt=l.value,r.id=f.value,r.className=m.value,r.style.width=s.value?"".concat(s.value,"px"):"",r.style.height=u.value?"".concat(u.value,"px"):"";var o=d.value;r.style.float="left"===o||"right"===o?o:"",r.style.display="center"===o?"block":"",r.style.marginLeft="center"===o?"auto":"",r.style.marginRight="center"===o?"auto":"",i||n._insertHtmlAtSelection(r,t),n.dispatchChange(),y()},p.onclick=y,v.onclick=y}},{key:"_insertHtmlAtSelection",value:function(e,t){if(this.ui.content.focus(),t){var n=window.getSelection();n.removeAllRanges(),n.addRange(t),t.deleteContents(),t.insertNode(e),(t=t.cloneRange()).setStartAfter(e),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}else this.ui.content.appendChild(e)}},{key:"execCmd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&("createLink"!==e?(document.execCommand(e,!1,t),this.ui.content.focus(),this.dispatchChange()):this.openLinkDialog())}},{key:"openLinkDialog",value:(e=H().m(function e(){var t,n,i,r,o;return H().w(function(e){for(;;)switch(e.n){case 0:if(t=this.saveSelection(),(n=this._getAnchorElement(t))||!t||!t.collapsed){e.n=1;break}return e.a(2,C.show("Please select some text to create a link.","error"));case 1:return i=new v,e.n=2,i.open({title:n?"Edit Link":"Insert Link",confirmText:n?"Update":"Insert",fields:[{type:"url",name:"url",label:"URL",value:n?n.getAttribute("href"):"https://",placeholder:"https://example.com"},{type:"checkbox",name:"newTab",label:"Open in new tab",checked:!!n&&"_blank"===n.target}]});case 2:(r=e.v)&&r.url&&(this.restoreSelection(t),document.execCommand("createLink",!1,r.url),(o=this._getAnchorElement(this.saveSelection()))&&(r.newTab?(o.target="_blank",o.rel="noopener noreferrer"):(o.removeAttribute("target"),o.removeAttribute("rel"))),this.dispatchChange());case 3:return e.a(2)}},e,this)}),t=function(){var t=this,n=arguments;return new Promise(function(i,r){var o=e.apply(t,n);function a(e){R(o,i,r,a,c,"next",e)}function c(e){R(o,i,r,a,c,"throw",e)}a(void 0)})},function(){return t.apply(this,arguments)})},{key:"_getAnchorElement",value:function(e){if(!e)return null;var t=e.startContainer;return t.nodeType===Node.TEXT_NODE&&(t=t.parentNode),t.closest("a")}},{key:"saveSelection",value:function(){var e=window.getSelection();return e.rangeCount>0&&this.ui.content.contains(e.anchorNode)?e.getRangeAt(0):null}},{key:"restoreSelection",value:function(e){if(e){this.ui.content.focus();var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}},{key:"destroy",value:function(){this.element=null,this.ui={},this._initialized=!1}}]);var e,t}();window.MSSEditor=U;const V=U;function K(){document.querySelectorAll('.ms-media-picker-container[data-is-inline="true"]').forEach(function(e){e.__mediaPickerInstance||(e.__mediaPickerInstance=new F(e,{isInline:!0}))}),document.querySelectorAll(".ms-media-editor-container").forEach(function(e){e.__editorInstance&&"function"==typeof e.__editorInstance.destroy&&(e.__editorInstance.destroy(),e.__editorInstance=null),e.__editorInstance||(e.__editorInstance=new V(e))})}window.__MS_MEDIA_PICKER_BOUND__||(document.addEventListener("click",function(e){var t=e.target.closest("button.ms-media-picker");if(t){var n=t.dataset.targetSelector,i=t.dataset.targetType,r=n?document.querySelector(n):null,o=r?r.accept:"";D.open(function(e){if(n&&i){var t=document.querySelector(n);if(!t)return console.error('Target element "'.concat(n,'" not found.'));"input"===i?(t.value=e.url,t.dispatchEvent(new Event("input",{bubbles:!0}))):"image"===i?t.src=e.url:"html"===i&&(t.innerHTML='<img src="'.concat(e.url,'" alt="').concat(e.name,'" style="max-width:100%;">'))}},o,t)}}),window.__MS_MEDIA_PICKER_BOUND__=!0),document.addEventListener("DOMContentLoaded",K),document.addEventListener("livewire:navigated",K)},909:()=>{}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,r,o)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,r,o]=e[u],c=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(i.O).every(e=>i.O[e](n[l]))?n.splice(l--,1):(c=!1,o<a&&(a=o));if(c){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={489:0,40:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[a,c,l]=n,s=0;if(a.some(t=>0!==e[t])){for(r in c)i.o(c,r)&&(i.m[r]=c[r]);if(l)var u=l(i)}for(t&&t(n);s<a.length;s++)o=a[s],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},n=self.webpackChunkmedia_picker=self.webpackChunkmedia_picker||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.O(void 0,[40],()=>i(654));var r=i.O(void 0,[40],()=>i(909));r=i.O(r)})();